<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>richcat.lol</title>
<style>
  /* ===== Global (black & white only) ===== */
  :root { --bg:#000; --fg:#fff; --muted:#c9c9c9; --border:#2a2a2a; }
  * { box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    overflow:hidden; user-select:none; /* no highlight */
    letter-spacing:.1px;
  }

  /* ===== ENTER SCREEN ===== */
  .enter{
    position:fixed; inset:0; display:grid; place-items:center; overflow:hidden;
  }
  .enter-inner{
    position:relative; text-align:center; z-index:2; padding:24px 18px;
    animation:fadeIn .6s ease both;
  }
  /* animated grid-lines backdrop */
  .enter::before, .enter::after{
    content:""; position:absolute; inset:-50%;
    background:
      repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0 1px, transparent 1px 3px);
    animation:moveA 18s linear infinite; opacity:.12;
  }
  .enter::after{
    transform:rotate(90deg);
    animation:moveB 26s linear infinite reverse;
  }
  @keyframes moveA { to { transform: translateY(-50%); } }
  @keyframes moveB { to { transform: rotate(90deg) translateY(-50%); } }

  .pusheen{
    width:min(220px,60vw); filter:grayscale(100%) contrast(110%); display:block; margin:0 auto 14px;
  }

  .glitch{
    font-size:clamp(22px,4vw,36px); font-weight:700; position:relative; display:inline-block;
    padding:2px 6px;
  }
  .glitch::before,.glitch::after{
    content:attr(data-text); position:absolute; inset:0; color:#fff; mix-blend-mode:screen;
    clip-path:inset(0 0 0 0);
  }
  .glitch::before{ transform:translate(1px,-1px); opacity:.55; }
  .glitch::after{ transform:translate(-1px,1px); opacity:.35; }
  .glow{ animation:glow 2.2s ease-in-out infinite; }
  @keyframes glow{ 0%,100%{text-shadow:0 0 0 #fff} 50%{text-shadow:0 0 14px #fff;} }

  .enter-btn{
    margin-top:16px; background:transparent; color:var(--fg);
    border:1.5px solid var(--fg); padding:10px 26px; letter-spacing:.18em;
    cursor:pointer; transition:.2s ease; font-weight:700;
  }
  .enter-btn:hover{ background:var(--fg); color:var(--bg); box-shadow:0 0 18px #fff; }
  .sub{ margin-top:8px; font-size:12px; color:var(--muted); }
  .foot{ position:fixed; bottom:14px; left:0; right:0; text-align:center; font-size:12px;
         opacity:.85; animation:pulse 2.6s ease-in-out infinite; }
  @keyframes pulse{50%{opacity:.55}}

  .hide{opacity:0; pointer-events:none; transition:opacity .35s ease}

  /* ===== TERMINAL WINDOW (draggable) ===== */
  .term{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    width:min(900px,92vw); height:min(540px,80vh);
    background:#000; border:1px solid var(--border); border-radius:10px;
    box-shadow:0 12px 48px rgba(255,255,255,.10), inset 0 0 0 1px rgba(255,255,255,.03);
    display:none; flex-direction:column; opacity:0; transition:opacity .28s ease;
  }
  .term.show{display:flex; opacity:1}
  .bar{
    display:flex; align-items:center; justify-content:space-between;
    padding:8px 10px; border-bottom:1px solid var(--border);
    background:#0c0c0c; border-radius:10px 10px 0 0; cursor:grab; user-select:none;
  }
  .dots{display:flex; gap:6px}
  .dot{width:10px; height:10px; border:1px solid #7d7d7d; border-radius:50%}
  .title{font-size:12px; color:#e9e9e9; letter-spacing:.04em}
  .screen{
    flex:1; padding:14px; overflow:auto; scrollbar-width:none; -ms-overflow-style:none;
    white-space:pre-wrap; line-height:1.42; font-size:14px;
  }
  .screen::-webkit-scrollbar{display:none}
  .row{
    display:flex; gap:8px; align-items:center; padding:10px 12px; border-top:1px solid var(--border);
    background:rgba(255,255,255,.02); border-radius:0 0 10px 10px;
  }
  .prompt{color:#fff}
  .dollar{color:#fff; font-weight:800}
  .inp{
    flex:1; background:transparent; border:0; outline:0; color:var(--fg); font:inherit;
  }
  .blink{ display:inline-block; width:8px; height:16px; background:#fff; margin-left:2px;
          animation:blink 1s steps(1,end) infinite; }
  @keyframes blink{50%{opacity:0}}

  .fade-out{ opacity:0 !important; transition:opacity .35s ease; }

  /* tiny shake when yanked */
  .shake{animation:shake .25s}
  @keyframes shake{
    20%{transform:translate(calc(-50% - 1px),calc(-50%))}
    40%{transform:translate(calc(-50% + 1px),calc(-50%))}
    60%{transform:translate(calc(-50% - 1px),calc(-50%))}
    80%{transform:translate(calc(-50% + 1px),calc(-50%))}
  }

  @keyframes fadeIn{from{opacity:0; transform:translateY(6px)}to{opacity:1; transform:none}}
</style>
</head>
<body>

<!-- ===== ENTER ===== -->
<section class="enter" id="enter">
  <div class="enter-inner">
    <img class="pusheen" src="https://files.catbox.moe/k9z1u2.gif" alt="cat" />
    <div class="glitch glow" data-text="Welcome to richcat.lol">Welcome to richcat.lol</div>
    <div class="sub"></div>
    <button id="enterBtn" class="enter-btn">ENTER</button>
  </div>
  <div class="foot">richcat.lol © 2025</div>
</section>

<!-- ===== TERMINAL ===== -->
<section class="term" id="term">
  <div class="bar" id="dragBar">
    <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
    <div class="title">richcat@lol — bash</div>
  </div>
  <div class="screen" id="screen"></div>
  <div class="row">
    <span class="prompt">richcat@lol:~<span class="dollar">$</span></span>
    <input id="cmd" class="inp" spellcheck="false" autocomplete="off" />
    <span class="blink"></span>
  </div>
</section>

<!-- ===== AUDIO ===== -->
<audio id="bgm" src="https://files.catbox.moe/vkjinc.mp3" autoplay muted loop playsinline></audio>
<audio id="bye" src="https://files.catbox.moe/08gjdx.mp3"></audio>

<script>
/* ---------- Elements ---------- */
const enter = document.getElementById('enter');
const enterBtn = document.getElementById('enterBtn');
const term = document.getElementById('term');
const screen = document.getElementById('screen');
const cmd = document.getElementById('cmd');
const dragBar = document.getElementById('dragBar');
const bgm = document.getElementById('bgm');
const bye = document.getElementById('bye');

/* ---------- Autoplay best-effort ---------- */
// try immediately; then unmute soon; also unmute on any user gesture
const resumeAudio = () => { try { bgm.muted = false; bgm.play(); } catch(e){} };
bgm.play().catch(()=>{});
setTimeout(resumeAudio, 1200);
['pointerdown','keydown','touchstart','mousemove'].forEach(ev => {
  window.addEventListener(ev, resumeAudio, { once:true, passive:true });
});

/* ---------- Anti-inspect / no context menu (not foolproof) ---------- */
window.addEventListener('contextmenu', e => e.preventDefault());
window.addEventListener('keydown', e => {
  const k = e.key.toLowerCase();
  if (k === 'f12' || (e.ctrlKey && e.shiftKey && ['i','j','c'].includes(k)) ||
      (e.ctrlKey && ['u','s','p'].includes(k))) { e.preventDefault(); }
});

/* ---------- Typing engine ---------- */
let isTyping = false;
const esc = s => s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
function typeLines(lines, speed=14, gap=120, done){
  isTyping = true;
  let i=0;
  const next = () => {
    if(i>=lines.length){ isTyping=false; done&&done(); return; }
    const text = lines[i]; let j=0;
    const el = document.createElement('div'); screen.appendChild(el);
    const t = setInterval(()=>{
      el.innerHTML += esc(text.charAt(j)); j++;
      screen.scrollTop = screen.scrollHeight;
      if(j>=text.length){ clearInterval(t); i++; setTimeout(next, gap); }
    }, speed);
  };
  next();
}

/* ---------- Boot / initial lines ---------- */
function boot(){
  screen.innerHTML = '';
  typeLines([
    "open src",
    "open ryce_bag",
    "Type 'help' for options."
  ], 12, 110);
}

/* ---------- Show terminal ---------- */
enterBtn.addEventListener('click', ()=>{
  enter.classList.add('hide');
  setTimeout(()=>{
    term.classList.add('show');
    boot();
    cmd.focus();
  }, 250);
});

/* ---------- Commands ---------- */
function handle(input){
  const txt = input.trim();
  if(!txt) return;
  const low = txt.toLowerCase();

  if(low === 'help'){
    typeLines([
      "Available commands:",
      "  open src        -> profile 1",
      "  open ryce_bag   -> ryce profile",
      "  clear           -> reset view",
      "  exit            -> back to enter"
    ]);
  } else if(low === 'clear'){
    screen.innerHTML = '';
    boot();
  } else if(low === 'exit'){
    // fade terminal, play bye, go back
    try{ bye.currentTime = 0; bye.play(); }catch(e){}
    term.classList.add('fade-out');
    setTimeout(()=>{
      term.classList.remove('show','fade-out');
      term.style.display='none'; // hide fully
      // show enter again
      enter.classList.remove('hide');
      // reset
      screen.innerHTML = '';
      // allow re-open
      setTimeout(()=>{ term.style.display=''; }, 10);
    }, 320);
  } else if(low === 'open src' || low === 'source'){
    typeLines(["Opening src..."], 12, 100, ()=> setTimeout(()=>location.href="http://richcat.lol/1",200));
  } else if(low === 'open ryce_bag' || low === 'open ryce' || low === 'open rycebag' || low === 'ryce'){
    typeLines(["Opening ryce_bag..."], 12, 100, ()=> setTimeout(()=>location.href="http://richcat.lol/ryce",200));
  } else {
    typeLines([`Command not found: ${txt}`, "Type 'help' for options."]);
  }
}

/* ---------- Input handling (block spam while typing) ---------- */
cmd.addEventListener('keydown', e=>{
  if(e.key === 'Enter'){
    if(isTyping){ e.preventDefault(); return; }
    const val = cmd.value;
    cmd.value = '';
    screen.innerHTML += `richcat@lol:~$ ${esc(val)}\n`;
    handle(val);
  }
});

/* ---------- Draggable terminal (accurate, no snap) ---------- */
let dragging=false, sx=0, sy=0, startL=0, startT=0;
const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
dragBar.addEventListener('mousedown', e=>{
  dragging=true; sx=e.clientX; sy=e.clientY;
  const r = term.getBoundingClientRect(); startL=r.left; startT=r.top;
  document.body.style.cursor='grabbing';
});
window.addEventListener('mouseup', ()=>{ dragging=false; document.body.style.cursor=''; });
window.addEventListener('mousemove', e=>{
  if(!dragging) return;
  const dx=e.clientX-sx, dy=e.clientY-sy;
  const vw=innerWidth, vh=innerHeight, w=term.offsetWidth, h=term.offsetHeight;
  const left = clamp(startL+dx, 8, vw-w-8);
  const top  = clamp(startT+dy, 8, vh-h-8);
  term.style.left = (left + w/2) + 'px';
  term.style.top  = (top  + h/2) + 'px';
  term.style.transform = 'translate(-50%,-50%)';
  if(Math.abs(dx)+Math.abs(dy) > 140){ term.classList.add('shake'); setTimeout(()=>term.classList.remove('shake'),260); }
});

/* Keep input focused when clicking inside terminal */
term.addEventListener('mousedown', ()=> setTimeout(()=>cmd.focus(), 0));
</script>
</body>
</html>
